# AndroidBlueView - BMS蓝牙监控与控制系统

AndroidBlueView 是一款基于 Qt 6 开发的 Android 应用程序，用于通过蓝牙与电池管理系统（BMS）进行通信，实现实时数据监测、设备控制和参数配置功能。

## 项目特点

- **蓝牙通信**：支持与 BMS 设备进行蓝牙连接和数据交互
- **实时监控**：实时显示电池状态、电压、电流等关键参数
- **设备控制**：提供充电、放电、关机、重启等系统控制功能
- **参数配置**：支持修改 BMS 设备的各项参数设置
- **多语言支持**：内置中英文双语切换功能
- **现代化 UI**：采用 Qt Quick/QML 构建的现代化用户界面
- **跨平台**：基于 Qt 框架，便于移植到其他平台

## 技术栈

- **开发框架**：Qt 6 (Qt Quick/QML)
- **编程语言**：C++17
- **蓝牙支持**：Qt Bluetooth
- **UI 组件**：自定义 QML 组件
- **构建系统**：qmake
- **开发平台**：支持 Android (arm64-v8a)

## 项目结构

```
AndroidBlueView/
├── android/              # Android 平台相关文件
├── language/             # 多语言翻译文件
├── QZXing/               # 二维码扫描库
├── views/                # QML 界面文件
│   ├── component/        # 自定义 QML 组件
│   ├── font/             # 字体文件
│   ├── js/               # JavaScript 文件
│   └── res/              # 资源文件 (SVG 图标)
├── AndroidBlueView.pro   # Qt 项目配置文件
├── main.cpp              # 程序入口
├── BMSProtocol.cpp/h     # BMS 通信协议实现
├── BmsController.cpp/h   # BMS 控制器
├── module.cpp/h        # 主模块
└── ...                   # 其他功能模块
```

## 主要功能模块

### 1. BMS 通信协议
- 实现 BMS 设备的通信协议解析
- 支持数据帧的打包与解包
- CRC16 校验算法实现

### 2. 蓝牙控制器
- 蓝牙设备搜索与连接
- 数据发送与接收管理
- 连接状态监控

### 3. 界面模块
- 主界面：实时数据显示
- 设备控制：系统开关机、充电放电控制
- 参数设置：设备参数配置
- 信息页面：设备信息与帮助

### 4. 多语言支持
- 自动根据系统语言切换
- 支持手动切换中英文
- 内置翻译文件管理

## 编译与构建

### 环境要求
- Qt 6.0 及以上版本
- Android SDK (API Level 35 及以上)
- Android NDK
- Java JDK 11 及以上

### 编译步骤

1. 克隆项目到本地
2. 使用 Qt Creator 打开 `AndroidBlueView.pro`
3. 配置 Android 构建环境
4. 选择目标架构 (arm64-v8a)
5. 编译项目
6. 生成 APK 文件

### 命令行构建

```bash
# 进入项目目录
cd AndroidBlueView

# 创建构建目录
mkdir build && cd build

# 运行 qmake
qmake ../AndroidBlueView.pro

# 编译项目
make -j4

# 生成 APK
make apk
```

## 使用说明

1. **安装应用**：将生成的 APK 文件安装到 Android 设备
2. **打开应用**：启动 AndroidBlueView 应用程序
3. **蓝牙连接**：搜索并连接到 BMS 设备
4. **数据监控**：查看实时电池数据和状态
5. **设备控制**：根据需要进行充电、放电等操作
6. **参数设置**：修改设备参数（需要管理员密码）

### 管理员密码

默认管理员密码为 `123456`，用于执行系统级操作（如关机、重启、参数修改等）。

## 主要功能界面

### 实时数据页面
- 显示电池组电压、电流
- 显示各单体电池电压
- 显示温度、SOC 等关键参数
- 实时更新数据曲线

### 设备控制页面
- 强制充电控制
- 强制放电控制
- 系统关机
- 系统重启
- 弱电开关控制

### 参数设置页面
- 电池参数配置
- 保护阈值设置
- 通信参数设置
- 功能配置

## 版本历史

- **v1.00.001.20251026**：初始版本发布
  - 实现基本的蓝牙通信功能
  - 支持实时数据监测
  - 提供设备控制功能
  - 支持中英文切换

## 开发说明

### 添加新功能

1. 在对应的功能模块中添加新类
2. 在 `module.cpp` 中注册新模块
3. 在 QML 界面中添加对应的 UI 组件
4. 实现通信协议和数据处理逻辑

### 多语言支持

1. 更新 `language/` 目录下的翻译文件
2. 使用 Qt Linguist 工具编辑翻译
3. 重新编译项目以包含新的翻译

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来帮助改进项目。

## 联系方式

如有问题或建议，请通过以下方式联系：

- 项目维护者：skq
- 版本：1.00.001.20251026

---

**注意**：本应用程序用于专业的电池管理系统监控，使用前请确保您了解相关操作的风险，并遵循安全操作规程。